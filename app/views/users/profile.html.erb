<div class="profile-wrapper">

  <h1 class="profile-title">My Profile</h1>

  <div class="profile-grid">

    <!-- LEFT CARD -->
    <div class="profile-card profile-card--left">

      <h2 class="profile-card-title">
        <%= @user.fullname.presence || "Fullname" %>
      </h2>

      <div class="profile-avatar-container">
        <% if @user.avatar.attached? %>
          <%= image_tag @user.avatar.variant(resize_to_fill: [220, 220]),
                        class: "profile-avatar" %>
        <% else %>
          <div class="profile-avatar placeholder-avatar">
            <i>No Photo</i>
          </div>
        <% end %>
      </div>

      <%= link_to "Edit profile",
                  edit_profile_path,
                  class: "profile-edit-link" %>

    </div>

    <!-- RIGHT CARD -->
    <div class="profile-card profile-card--right">

    <h2 class="profile-card-title">Bio & other details</h2>

    <div class="profile-details-grid">

        <div class="profile-field">
        <label>Username</label>
        <div class="profile-field-value"><%= @user.username %></div>
        </div>

        <div class="profile-field">
        <label>Date of Birth</label>
        <div class="profile-field-value"><%= @user.date_of_birth || "—" %></div>
        </div>

        <div class="profile-field">
        <label>Start Date</label>
        <div class="profile-field-value"><%= @user.sobriety_start_date || "—" %></div>
        </div>

        <div class="profile-field">
        <label>Current Streak</label>
        <div class="profile-field-value"><%= @user.sobriety_days %> days</div>
        </div>

        <div class="profile-field full-width">
        <label>Headline</label>
        <div class="profile-field-value"><%= @user.headline.presence || "—" %></div>
        </div>

        <div class="profile-field full-width">
        <label>Address</label>
        <div class="profile-field-value"><%= @user.address.presence || "—" %></div>
        </div>

        <div class="profile-field full-width">
        <label>Bio</label>
        <div class="profile-field-value">
            <%= simple_format(@user.bio.to_s.presence || "—") %>
        </div>
        </div>

    </div>

    </div>
  </div>
</div>

<div class="profile-footer">
  <%= link_to "Change Password", edit_user_registration_path, class: "profile-footer-link" %>
  <%= link_to "Log out", destroy_user_session_path, method: :delete, class: "profile-footer-link" %>
</div>
