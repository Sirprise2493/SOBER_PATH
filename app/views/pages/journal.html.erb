<%= turbo_stream_from [current_user, :journal_contents] %>

<section class="journal-page">

  <%= render "pages/journal/journal_book",
             journal_content: @journal_content,
             date: @date,
             today: @today %>

  <div id="journal-bottom">

    <!-- Navigation unter dem Journal -->
    <div class="journal-nav journal-nav--bottom">
      <% if @previous_entry_date.present? %>
        <%= link_to "← Previous entry",
                    journal_path(date: @previous_entry_date,
                                 calendar_date: @calendar_date,
                                 anchor: "journal-bottom"),
                    class: "journal-nav__button" %>
      <% else %>
        <span class="journal-nav__button journal-nav__button--disabled">
          ← Previous entry
        </span>
      <% end %>

      <%= link_to "Today",
                  journal_path(date: @today,
                               calendar_date: @calendar_date,
                               anchor: "journal-bottom"),
                  class: "journal-nav__button journal-nav__button--today" %>

      <% if @next_entry_date.present? %>
        <%= link_to "Next entry →",
                    journal_path(date: @next_entry_date,
                                 calendar_date: @calendar_date,
                                 anchor: "journal-bottom"),
                    class: "journal-nav__button" %>
      <% else %>
        <span class="journal-nav__button journal-nav__button--disabled">
          Next entry →
        </span>
      <% end %>
    </div>

    <!-- Kalender im „Dashboard“-Stil -->
    <%= render "pages/journal/journal_calendar",
               date: @date,
               today: @today,
               calendar_date: @calendar_date,
               entry_dates: @entry_dates %>
  </div>
</section>
