<div data-controller="auth-modal">
  <section class="hero">
    <div class="hero-visual">
      <div class="hero-shape"></div>
      <%= image_tag "navbar-icon2.png", class: "hero-logo" %>
      <div class="hero-visual-img"></div>
    </div>

    <div class="hero-main-content">
      <h1>Welcome to Your Journey</h1>
      <p class="hero-subtitle">
        A safe space for support, guidance and community
      </p>

      <div class="hero-buttons">
        <% if user_signed_in? %>
          <!-- Logged IN: send them into the app -->
          <%= link_to "Go to chatroom", chatroom_path, class: "btn btn-primary" %>
          <%= link_to "View profile", profile_path, class: "btn btn-primary" %>
        <% else %>
          <!-- Logged OUT: open modal via Stimulus -->
          <button
            type="button"
            class="btn btn-primary"
            data-action="click->auth-modal#openLogin">
            Log in
          </button>

          <button
            type="button"
            class="btn btn-primary"
            data-action="click->auth-modal#openSignup">
            Sign up
          </button>
        <% end %>
      </div>
    </div>
  </section>

  <section class="main-feature-green" data-controller="feature-dropdown">
    <h2>How SoberPath Works</h2>
    <p>
      SoberPath helps people stay strong in their recovery journey<br>
    </p>

    <div class="feature-buttons">
      <button class="feature-btn"
              data-feature-dropdown-target="button"
              data-action="click->feature-dropdown#show"
              data-panel="concept">
        Our concept
      </button>

      <button class="feature-btn"
              data-feature-dropdown-target="button"
              data-action="click->feature-dropdown#show"
              data-panel="studies">
        Alcoholism studies
      </button>

      <button class="feature-btn"
              data-feature-dropdown-target="button"
              data-action="click->feature-dropdown#show"
              data-panel="statistics">
        External Help & Resources
      </button>
    </div>

    <div class="main-feature-box" data-feature-dropdown-target="box"></div>

    <div hidden data-panel="concept-content">
      <%= render "pages/landing_page/button1_partial" %>
    </div>
    <div hidden data-panel="studies-content">
      <%= render "pages/landing_page/button2_partial" %>
    </div>
    <div hidden data-panel="statistics-content">
      <%= render "pages/landing_page/button3_partial" %>
    </div>
  </section>

  <% unless user_signed_in? %>
    <!-- Only render the template for logged-out users -->
    <template id="auth-modal-template">
      <%= render "shared/auth_modal" %>
    </template>
  <% end %>
</div>
